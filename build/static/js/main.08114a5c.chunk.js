(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,function(e,t,a){e.exports={Comment:"Comment_Comment__2AoBx",Comment_header:"Comment_Comment_header__1XM-L",User:"Comment_User__2vKAZ",Comment_body:"Comment_Comment_body__1TLet",replies:"Comment_replies__22zZK",UserInfo:"Comment_UserInfo__1tm11",CommentInfoWrapepr:"Comment_CommentInfoWrapepr__7A0DS",ButtonsWrapper:"Comment_ButtonsWrapper__jPxwd",CommentButton:"Comment_CommentButton__1Ebkw",ReplyButton:"Comment_ReplyButton__2nOP5",CommentState:"Comment_CommentState__3yuvq"}},,,,,,,,function(e,t,a){e.exports={EditComment:"EditComment_EditComment__2zMrH",Comment_text:"EditComment_Comment_text__3QYAP",Button_save:"EditComment_Button_save__2AcCF",Button_cancel:"EditComment_Button_cancel___jq6A"}},,function(e,t,a){e.exports={Form:"CommentForm_Form__3j9-B",name:"CommentForm_name__2yIIB",text:"CommentForm_text__fvDs9",Comment_Button:"CommentForm_Comment_Button__3c65i"}},,function(e,t,a){e.exports={Header:"Header_Header__2CCjY",logo:"Header_logo__K0sAU",comments:"Header_comments__1YTIP"}},function(e,t,a){e.exports={Loader_wrapper:"Loader_Loader_wrapper__3Ke7t",Loader_items:"Loader_Loader_items__22rP-","Loader_items-1":"Loader_Loader_items-1__26y6C","Loader_items-2":"Loader_Loader_items-2__3hNlA","Loader_items-3":"Loader_Loader_items-3__TpbK5",Loader:"Loader_Loader__1Qzxj"}},function(e,t,a){e.exports={Footer:"Footer_Footer__3BnCl",Navbar:"Footer_Navbar__wh_HG"}},,,,function(e,t,a){e.exports={Discussion:"Discussion_Discussion__1jdJx",CommentsWrapper:"Discussion_CommentsWrapper__3au-w"}},function(e,t,a){e.exports={Modal:"Modal_Modal__2cTof",Modal_text:"Modal_Modal_text__1IBzS"}},,,,function(e,t,a){e.exports=a(36)},,,,,function(e,t,a){},,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),m=a.n(o),c=(a(29),a(13)),s=a.n(c),l=a(8);var u=Object(l.b)((function(e){return{comments:e.comments}}))((function(e){return r.a.createElement("header",{className:s.a.Header},r.a.createElement("img",{className:s.a.logo,src:"./awesome.svg",alt:"awesome logo"}),r.a.createElement("p",{className:s.a.comments},"Comments: ",e.comments.length))})),i=a(19),_=a.n(i),d=a(3),p=a(6),f=a(11),E=a.n(f);function C(e){var t={user:{value:e.author,touched:!1},text:{value:"",touched:!1},canSubmit:!1},a=Object(n.useState)(t),o=Object(p.a)(a,2),m=o[0],c=o[1];function s(e){var t=Object(d.a)({},m);t[e.target.name]={value:e.target.value,touched:!0},t.canSubmit=!!t.user.value&&!!t.text.value,c(t)}return Object(n.useEffect)((function(){c(t)}),[e.author]),r.a.createElement("form",{className:E.a.Form,onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{className:E.a.name,type:"text",placeholder:"Your name",id:"user",name:"user",value:m.user.value,onChange:s}),r.a.createElement("textarea",{className:E.a.text,id:"text",name:"text",placeholder:"Type something...",value:m.text.value,onChange:s}),r.a.createElement("button",{className:E.a.Comment_Button,disabled:!m.canSubmit,onClick:function(){return function(a){e.formHandler({user:a.user.value,text:a.text.value,parentId:e.id}),c(t),e.showForm&&e.showForm(!1)}(m)}},"Comment"))}var v=a(2),h=a.n(v),b=a(5),N={url:"https://aqueous-springs-34380.herokuapp.com"};function x(e){return{type:"LOAD_COMMENTS_SUCCESS",data:e}}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong...";return{type:"LOAD_COMMENTS_ERROR",message:e}}function g(e,t){return{type:"CREATE_COMMNET_SUCCESS",data:e,author:t}}var S=a(1),w=a.n(S),j=a(9),y=a.n(j);function k(e){var t=Object(n.useState)(e.comment),a=Object(p.a)(t,2),o=a[0],m=a[1];return r.a.createElement("form",{className:y.a.EditComment,onSubmit:function(e){return e.preventDefault()}},r.a.createElement("textarea",{className:y.a.Comment_text,name:"text",id:"text",value:o.text,onChange:function(e){var t=Object(d.a)({},o);t.text=e.target.value,m(t)}}),r.a.createElement("div",{className:y.a.ButtonWrapper},r.a.createElement("button",{className:y.a.Button_save,onClick:function(){e.updateComment(o),e.cancel(!1)}},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement("button",{className:y.a.Button_cancel,onClick:function(){return e.cancel(!1)}},r.a.createElement("i",{className:"fas fa-times"}))))}function T(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),o=a[0],m=a[1],c=Object(n.useState)(!1),s=Object(p.a)(c,2),l=s[0],u=s[1],i=e.replyTo?r.a.createElement("p",{className:w.a.replyTo},"reply to: ",e.replyTo):null,_=o?r.a.createElement(C,{id:e.comment._id,formHandler:e.formHandler,showForm:m,author:e.author}):null,d=e.comment.updateAt?r.a.createElement("p",null,"this comment was edited at\xa0",new Date(e.comment.updateAt).toLocaleString()):null,f=e.replies?r.a.createElement("div",{className:w.a.replies},e.replies):null,E=e.replies?r.a.createElement("button",{className:w.a.ReplyButton,onClick:function(){return m(!o)}},r.a.createElement("i",{className:"fas fa-reply"})):null,v=l?r.a.createElement(k,{comment:e.comment,updateComment:e.updateComment,cancel:u}):r.a.createElement("p",{className:w.a.Comment_body},e.comment.text);return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"https://aqueous-springs-34380.herokuapp.com",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"http://localhost:3001"})),r.a.createElement("div",{className:w.a.Comment},r.a.createElement("div",{className:w.a.Comment_header},r.a.createElement("div",{className:w.a.UserInfo},r.a.createElement("p",{className:w.a.User},e.comment.user),i),d,r.a.createElement("div",{className:w.a.CommentInfoWrapepr},r.a.createElement("div",{className:w.a.ButtonsWrapper},r.a.createElement("button",{className:w.a.CommentButton,onClick:function(){return e.updateComment({_id:e.comment._id,state:e.comment.state+1},"/state")}},r.a.createElement("i",{className:"fas fa-thumbs-up"})),r.a.createElement("p",{className:w.a.CommentState},e.comment.state),r.a.createElement("button",{className:w.a.CommentButton,onClick:function(){return e.updateComment({_id:e.comment._id,state:e.comment.state-1},"/state")}},r.a.createElement("i",{className:"fas fa-thumbs-down"})),r.a.createElement("button",{className:w.a.CommentButton,onClick:function(){return u(!l)}},r.a.createElement("i",{className:"fas fa-pencil-alt"})),r.a.createElement("button",{className:w.a.CommentButton,onClick:function(){return e.deleteHandler(e.comment._id)}},r.a.createElement("i",{className:"fas fa-trash-alt"}))),r.a.createElement("time",null,new Date(e.comment.created).toLocaleString()))),v,E,_,f)}var L=a(20),B=a.n(L);function A(e){return r.a.createElement("div",{className:B.a.Modal},r.a.createElement("p",{className:B.a.Modal_text},e.text))}var M=a(14),R=a.n(M);function D(e){return r.a.createElement("div",{className:R.a.Loader_wrapper},r.a.createElement("div",{className:R.a.Loader},r.a.createElement("div",{className:R.a.Loader_items},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))))}var F=Object(l.b)((function(e){return{comments:e.comments,loading:e.loading,author:e.author,err:e.err}}),(function(e){return{createComment:function(t){return e((a=t,function(){var e=Object(b.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(N.url+"/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,n.ok){e.next=9;break}throw new Error(r.message);case 9:t(g(r,a.user)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t(O(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()));var a},loadComments:function(){return e(function(){var e=Object(b.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOAD_COMMENTS_START"}),e.next=4,fetch(N.url+"/api/comments");case 4:return a=e.sent,e.next=7,a.json();case 7:if(n=e.sent,a.ok){e.next=10;break}throw new Error(n.message);case 10:t(x(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t(O(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())},deleteComment:function(t){return e(function(e){return function(){var t=Object(b.a)(h.a.mark((function t(a){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(N.url+"/api/comments",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});case 3:return n=t.sent,t.next=6,n.json();case 6:if(r=t.sent,n.ok){t.next=9;break}throw new Error(r.message);case 9:a(x(r)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),a(O(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(t))},updateComment:function(t,a){return e(function(e,t){return function(){var a=Object(b.a)(h.a.mark((function a(n){var r,o,m;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r="".concat(N.url,"/api/comments").concat(t||""),a.next=4,fetch(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:return o=a.sent,a.next=7,o.json();case 7:if(m=a.sent,o.ok){a.next=10;break}throw new Error(m.message);case 10:n(x(m)),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),n(O(a.t0.message));case 16:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e){return a.apply(this,arguments)}}()}(t,a))},clearErr:function(){return e({type:"CLEAR_ERROR"})}}}))((function(e){function t(t,a,n){return r.a.createElement(T,{key:t._id,comment:t,formHandler:e.createComment,replies:a,replyTo:n,deleteHandler:e.deleteComment,updateComment:e.updateComment,author:e.author})}Object(n.useEffect)((function(){e.loadComments()}),[]);var a=e.loading?r.a.createElement(D,null):e.comments.map((function(a){if(a.replies)return null;var n=e.comments.map((function(e){return e.replies===a._id?t(e,null,a.user):null}));return t(a,n)})),o=e.err?r.a.createElement(A,{text:e.err}):null,m=setTimeout((function(){e.clearErr(),clearTimeout(m)}),3e3);return r.a.createElement("main",{className:_.a.Discussion},o,r.a.createElement("div",{className:_.a.CommentsWrapper},a,r.a.createElement(C,{formHandler:e.createComment,author:e.author})))})),H=a(15),U=a.n(H);var W=function(e){return r.a.createElement("footer",{className:U.a.Footer},r.a.createElement("time",null,(new Date).getFullYear()),r.a.createElement("address",{className:U.a.Author},"Vadim Kolomiets"),r.a.createElement("nav",{className:U.a.Navbar},r.a.createElement("a",{href:"https://www.linkedin.com/in/vadim-kolomiets-704b2718b/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fab fa-linkedin"})),r.a.createElement("a",{href:"https://github.com/free3xm",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("i",{className:"fab fa-github"}))))};var I=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u,null),r.a.createElement(F,null),r.a.createElement(W,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(10),K={comments:[],loading:!0,author:"",err:null};var J=a(23),Y=Object(P.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_COMMENTS_START":return Object(d.a)({},e,{loading:!0});case"LOAD_COMMENTS_SUCCESS":return Object(d.a)({},e,{loading:!1,comments:t.data});case"CREATE_COMMNET_SUCCESS":return Object(d.a)({},e,{comments:t.data,author:t.author});case"LOAD_COMMENTS_ERROR":return Object(d.a)({},e,{err:t.message});case"CLEAR_ERROR":return Object(d.a)({},e,{err:null});default:return e}}),Object(P.a)(J.a));m.a.render(r.a.createElement(l.a,{store:Y},r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[24,1,2]]]);
//# sourceMappingURL=main.08114a5c.chunk.js.map